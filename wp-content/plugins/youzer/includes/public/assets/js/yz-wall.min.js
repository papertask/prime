!function(n){"use strict";n(document).ready(function(){if(jQuery().viewportChecker){if(n.yz_init_wall_posts_effect=function(){n(".yz_effect")[0]&&n(".yz_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(t,e){t.addClass(t.data("effect"))}},500)},n.yz_init_wall_posts_effect(),n("body").on("append","#activity-stream",function(t){n.yz_init_wall_posts_effect()}),n(".yz-column-content div.activity")[0])new MutationObserver(function(t){n.yz_init_wall_posts_effect()}).observe(n(".yz-column-content div.activity")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1});if(n("div.activity #activity-stream")[0])new MutationObserver(function(t){n.yz_init_wall_posts_effect()}).observe(n("div.activity #activity-stream")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1})}if(n(document).on("click",".yz-trigger-who-modal",function(t){n(".yz-wall-modal-overlay").fadeIn(500,function(){n(this).find(".yz-modal-loader").fadeIn(400)}),t.preventDefault();var e={action:"yz_get_who_liked_post",post_id:n(this).data("who-liked")};jQuery.post(Youzer.ajax_url,e,function(t){n("#yz-wall-modal").append(t).find(".yz-wall-modal").addClass("yz-wall-modal-show"),n(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),n(document).keyup(function(t){n(".yz-wall-modal-show")[0]&&27===t.keyCode&&n(".yz-wall-modal-close").trigger("click")}),n(document).mouseup(function(t){n(".yz-wall-modal-overlay").is(t.target)&&n(".yz-wall-modal-show")[0]&&n(".yz-wall-modal-close").trigger("click")}),"on"==Youzer.activity_autoloader){var a=n(window);a.scroll(function(){var t=n("#activity-stream .load-more:visible");if(t.get(0)&&!t.data("yz-autoloaded")){var e=t.offset().top-3e3;a.scrollTop()+a.height()>e&&(t.data("yz-autoloaded",1),t.find("a").trigger("click"))}})}n("#activity-stream").on("click",".friendship-button a",function(){n(this).parent().addClass("loading");var t=n(this).attr("id"),e=n(this).attr("href"),i=n(this);return t=(t=t.split("-"))[1],e=(e=(e=e.split("?_wpnonce="))[1].split("&"))[0],jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:t,_wpnonce:e},function(t){var e=i.attr("rel"),a=i.parent();"add"===e?n(a).fadeOut(200,function(){a.removeClass("add_friend"),a.removeClass("loading"),a.addClass("pending_friend"),a.fadeIn(200).html(t)}):"remove"===e&&n(a).fadeOut(200,function(){a.removeClass("remove_friend"),a.removeClass("loading"),a.addClass("add"),a.fadeIn(200).html(t)})}),!1}),n("#activity-stream").on("click",".group-button a",function(t){n(this).hasClass("membership-requested")||n(this).addClass("yz-btn-loading");var e=n(this).parent().attr("id"),a=n(this).attr("href"),o=n(this);return e=(e=e.split("-"))[1],a=(a=(a=a.split("?_wpnonce="))[1].split("&"))[0],o.hasClass("leave-group")&&!1===confirm(BP_DTheme.leave_group_confirm)||jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:e,_wpnonce:a},function(a){var i=o.parent();n(i).fadeOut(200,function(){i.fadeIn(200).html(a);var t=n("#groups-personal span"),e=1;o.hasClass("leave-group")?(i.hasClass("hidden")&&i.closest("li").slideUp(200),e=0):o.hasClass("request-membership")&&(e=!1),t.length&&!1!==e&&(e?t.text(1+(t.text()>>0)):t.text((t.text()>>0)-1))})}),!1}),n("audio").on("play",function(){n("audio").not(this).each(function(t,e){e.pause()})})})}(jQuery);